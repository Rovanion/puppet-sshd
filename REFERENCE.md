# Reference
<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

**Classes**

* [`sshd`](#sshd): Configure default sshd settings

**Defined types**

* [`sshd::allow_from`](#sshdallow_from): Enable incoming ssh for a given set of hosts
+ Update iptables firewall
+ Update sshd_config with a Match directive and associated settings
+ Update access.conf
+ Update tcpwrappers

## Classes

### sshd

often

* **Note** Parameters below here are either OS dependent or not likely to change

#### Examples

##### 

```puppet
include sshd
```

#### Parameters

The following parameters are available in the `sshd` class.

##### `trusted_subnets`

Data type: `Array`

Array of IPs and CIDRs to be allowed through the firewall
Values from multiple sources are merged

##### `config`

Data type: `Hash`

Hash of global config settings
Defaults provided by this module
Values from multiple sources are merged
Key collisions are resolved in favor of the higher priority value

##### `config_matches`

Data type: `Hash[String,Hash]`

Hash of config "match" conditions and settings
Keys are match condition
Vals are a hash of sshd_config settings for the match condition
Expected format:
---
sshd::config_matches:
  Unique condition one:
    SettingOne: val
    SettingTwo:
      - val2
      - val3
  Unique condition two:
    SettingOne: val
    SettingTwo:
      - val2
      - val3
Note that condition strings must be valid sshd_config criteria-pattern pairs
Values from multiple sources are merged
Key collisions are resolved in favor of the higher priority value
Merges are deep to allow use of the knockout_prefix '-' (to remove a key
from the final result).

##### `revoked_keys`

Data type: `Array[String]`

List of ssh public keys to disallow
Values from multiple sources are merged

##### `required_packages`

Data type: `Array[String]`

List of package names to be installed (OS specific)
(Defaults provided by module should be sufficient)

##### `revoked_keys_file`

Data type: `String`



## Defined types

### sshd::allow_from

Enable incoming ssh for a given set of hosts
+ Update iptables firewall
+ Update sshd_config with a Match directive and associated settings
+ Update access.conf
+ Update tcpwrappers

#### Examples

##### 

```puppet
sshd::allow_from { 'namevar': }
```

##### 

```puppet
ssh::allow_from { 'allow incoming ssh by users 1,2,3 from hosts X,Y,Z':
    'users'                   => Array,
    'groups'                  => Array,
    'hostlist'                => Array,
    'additional_match_params' => Hash,
}
```

#### Parameters

The following parameters are available in the `sshd::allow_from` defined type.

##### `users`

Data type: `Array[ String ]`

Type: Array
Desc: list of users to allow (from hostlist)
Note: If both "users" and "groups" are empty, error is raised.

##### `groups`

Data type: `Array[ String ]`

Type: Array
Desc: list of groups to allow (from hostlist)
Note: If both "users" and "groups" are empty, error is raised.

##### `hostlist`

Data type: `Array[ String, 1 ]`

Type: Array
Desc: list of IPs or Hostnames that (users/groups) are allowed to ssh from

##### `additional_match_params`

Data type: `Hash[ String, Data ]`

Type: Hash
Desc: sshd config keywords and values
Format: additional_match_params = { 'keyword1' => 'value1',
                                    'keyword2' => 'value2',
                                    'keyword3' => [ 'val3_1','val3_2' ],
                                  }

